<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Leistungsnachweis – Informationssicherheit (Clean Version)</title>
<style>
:root {
  --bg:#0b1220;
  --panel:rgba(18,26,43,0.92);
  --border:rgba(255,255,255,0.12);
  --text:#e7ecff;
  --muted:#aab4e6;
  --good:#2bd576;
  --bad:#ff5c73;
  --warn:#ffd166;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(1200px 800px at 20% 10%, #132044 0%, var(--bg) 60%);
  color:var(--text);
}
header{
  position:sticky; top:0; z-index:10;
  backdrop-filter:blur(10px);
  background:rgba(11,18,32,0.78);
  border-bottom:1px solid var(--border);
}
.wrap{max-width:980px;margin:0 auto;padding:16px;}
h1{margin:0;font-size:18px;}
.sub{margin-top:6px;color:var(--muted);font-size:13px;line-height:1.35;}
.toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:14px 0 18px;}
.pill{border:1px solid var(--border);background:rgba(255,255,255,0.04);padding:8px 10px;border-radius:999px;font-size:13px;display:inline-flex;gap:8px;align-items:center;}
button{
  border:1px solid var(--border);
  background:rgba(255,255,255,0.06);
  color:var(--text);
  padding:10px 12px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
}
button:hover{background:rgba(255,255,255,0.10);}
button:disabled{opacity:.55;cursor:not-allowed;}
.grid{display:grid;grid-template-columns:1fr;gap:12px;}
.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  box-shadow:0 10px 30px rgba(0,0,0,0.25);
}
.qhead{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;}
.qnum{color:var(--muted);font-size:12px;}
.qtext{font-size:15px;line-height:1.35;margin-top:6px;}
.opts{display:grid;gap:8px;margin-top:12px;}
.opt{
  border:1px solid var(--border);
  background:rgba(255,255,255,0.04);
  border-radius:12px;
  padding:10px;
  display:grid;
  grid-template-columns:22px 1fr;
  gap:10px;
  align-items:start;
  cursor:pointer;
}
.opt:hover{background:rgba(255,255,255,0.07);}
.opt input{margin-top:3px;}
.notice{
  border:1px solid var(--border);
  background:rgba(255,255,255,0.04);
  border-radius:14px;
  padding:14px;
  margin-top:12px;
}
.notice.good{border-color:rgba(43,213,118,0.35);background:rgba(43,213,118,0.08);}
.notice.bad{border-color:rgba(255,92,115,0.35);background:rgba(255,92,115,0.08);}
.notice.warn{border-color:rgba(255,209,102,0.35);background:rgba(255,209,102,0.08);}
.small{font-size:12px;color:var(--muted);line-height:1.35;}
hr{border:none;border-top:1px solid var(--border);margin:12px 0;}
.toggle{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Leistungsnachweis – Informationssicherheit (Clean Version)</h1>
    <div class="sub">Pro Prüfung werden <strong>30</strong> Fragen zufällig aus dem bereinigten Fragenpool gewählt. Bestehensgrenze: <strong>65%</strong>.</div>
  </div>
</header>

<main class="wrap">
  <div class="toolbar">
    <span class="pill"><strong>Prüfungsfragen:</strong> <span id="examCount">0</span></span>
    <span class="pill"><strong>Beantwortet:</strong> <span id="answered">0</span></span>
    <button id="btnNew" type="button">Neue Prüfung</button>
    <button id="btnSubmit" type="button">Prüfung abgeben</button>
    <button id="btnReset" type="button">Alles löschen</button>
  </div>

  <div id="status" class="notice warn">
    <div><strong>Start:</strong> Klicke auf <strong>„Neue Prüfung“</strong>, um zu beginnen.</div>
  </div>

  <div class="toggle small" style="margin-top:12px;">
    <label><input id="showSolutions" type="checkbox" /> Nach Abgabe Lösungen anzeigen</label>
  </div>

  <div id="app" class="grid" style="margin-top:12px;"></div>
</main>

<script>
/* ÜBERARBEITETER FRAGENKATALOG (BANK)
   - Parsing-Fehler entfernt
   - Abkürzungen erklärt
   - Antwortlogik korrigiert
*/
const BANK = {
  "title": "Leistungsnachweis – Informationssicherheit (Clean)",
  "passMark": 65,
  "examSize": 30, 
  "questions": [
    // --- MALWARE & ANGRIFFSTYPEN ---
    {
      "q": "Was ist das Hauptmerkmal eines „Computervirus“ im Unterschied zu einem Wurm?",
      "options": [
        "Es benötigt ein Wirtsprogramm, um sich zu verbreiten.",
        "Es repliziert sich eigenständig über das Netzwerk ohne Wirt.",
        "Es tarnt sich immer als nützliche Software.",
        "Es verschlüsselt nur Daten, ohne sich zu verbreiten."
      ],
      "answer": 0,
      "meta": "Malware-Definitionen"
    },
    {
      "q": "Was kennzeichnet einen „Wurm“ (Computer Worm)?",
      "options": [
        "Er benötigt zwingend eine Benutzerinteraktion zum Starten.",
        "Er ist selbstreplizierend und verbreitet sich eigenständig über Netzwerke.",
        "Er tarnt sich als legitime Anwendung (z. B. Bildschirmschoner).",
        "Er infiziert ausschließlich Hardware-Komponenten."
      ],
      "answer": 1,
      "meta": "Malware-Definitionen"
    },
    {
      "q": "Was versteht man unter einem „Trojaner“?",
      "options": [
        "Ein Programm, das sich exponentiell im RAM vervielfältigt.",
        "Malware, die sich als nützliche Anwendung tarnt, aber im Hintergrund Schadfunktionen ausführt.",
        "Ein Fehler im Betriebssystemcode.",
        "Eine Firewall-Regel, die zu streng eingestellt ist."
      ],
      "answer": 1,
      "meta": "Malware-Definitionen"
    },
    {
      "q": "Was bedeutet die Abkürzung DoS in der IT-Sicherheit?",
      "options": [
        "Disk Operating System",
        "Denial of Service (Verweigerung des Dienstes durch Überlastung)",
        "Download over Security",
        "Data on Server"
      ],
      "answer": 1,
      "meta": "Angriffsarten"
    },
    {
      "q": "Was ist der Unterschied zwischen DoS und DDoS?",
      "options": [
        "DoS greift nur Datenbanken an, DDoS greift Webserver an.",
        "Bei DoS erfolgt der Angriff von einer Quelle, bei DDoS (Distributed) koordiniert von vielen Quellen.",
        "DDoS ist harmloser als DoS.",
        "Es gibt keinen technischen Unterschied."
      ],
      "answer": 1,
      "meta": "Angriffsarten"
    },
    {
      "q": "Was beschreibt ein DRDoS-Angriff (Distributed Reflected Denial of Service)?",
      "options": [
        "Ein Angriff, bei dem der Angreifer physisch in den Serverraum eindringt.",
        "Ein Angriff, bei dem Anfragen mit gefälschter Absender-IP an unbeteiligte Server (Reflektoren) gesendet werden, die dann massenhaft an das Opfer antworten.",
        "Das Löschen von Backups auf Spiegelservern.",
        "Ein Virus, der den Bildschirm spiegelt."
      ],
      "answer": 1,
      "meta": "Angriffsarten"
    },
    
    // --- SCHWACHSTELLEN & DATENBANKEN ---
    {
      "q": "Was ist „CVE“ (Common Vulnerabilities and Exposures)?",
      "options": [
        "Eine Anti-Viren-Software.",
        "Ein internationaler Standard zur eindeutigen Benennung und Auflistung bekannter Sicherheitslücken.",
        "Ein Gesetz zum Schutz von Computerdaten.",
        "Eine Zertifizierungsstelle für Webseiten."
      ],
      "answer": 1,
      "meta": "Schwachstellen-Management"
    },
    {
      "q": "Was ist die „NVD“ (National Vulnerability Database)?",
      "options": [
        "Eine Datenbank der US-Regierung, die auf CVE basiert und zusätzliche Analysen (z.B. CVSS-Scores) bereitstellt.",
        "Ein Verzeichnis aller Regierungsmitarbeiter.",
        "Ein Netzwerk-Visualisierungs-Dienst.",
        "Eine Liste verbotener Passwörter."
      ],
      "answer": 0,
      "meta": "Schwachstellen-Management"
    },

    // --- SOCIAL ENGINEERING ---
    {
      "q": "Was versteht man unter „Social Engineering“?",
      "options": [
        "Das technische Hacken von Firewalls.",
        "Die zwischenmenschliche Manipulation von Personen, um an vertrauliche Informationen zu gelangen.",
        "Das Programmieren von sozialen Netzwerken.",
        "Die Wartung von Serverräumen."
      ],
      "answer": 1,
      "meta": "Human Factor"
    },
    {
      "q": "Was ist „Phishing“?",
      "options": [
        "Das physische Stehlen von Festplatten.",
        "Versuch, über gefälschte E-Mails oder Webseiten an sensible Daten (Passwörter, Kreditkarten) zu gelangen.",
        "Ein spezielles Verfahren zur Kühlung von Servern.",
        "Das Ausnutzen von WLAN-Schwachstellen."
      ],
      "answer": 1,
      "meta": "Social Engineering"
    },
    {
      "q": "Was bezeichnet der Begriff „Spear-Phishing“?",
      "options": [
        "Ein breiter Angriff auf Millionen von zufälligen E-Mail-Adressen.",
        "Ein gezielter Phishing-Angriff auf eine bestimmte Person oder Organisation mit maßgeschneiderten Inhalten.",
        "Phishing per SMS.",
        "Phishing per Telefonanruf."
      ],
      "answer": 1,
      "meta": "Social Engineering"
    },
    {
      "q": "Was ist „Vishing“?",
      "options": [
        "Video-Phishing über Webcams.",
        "Voice Phishing: Der Versuch, Informationen per Telefonanruf zu stehlen.",
        "Virtual Phishing in VR-Umgebungen.",
        "Virus-Fishing: Das Suchen nach Viren."
      ],
      "answer": 1,
      "meta": "Social Engineering"
    },
    {
      "q": "Was ist „Smishing“?",
      "options": [
        "Phishing per SMS oder Messenger-Diensten.",
        "Smart Phishing durch KI.",
        "Small Phishing (nur kleine Beträge).",
        "Server Mismatching."
      ],
      "answer": 0,
      "meta": "Social Engineering"
    },
    {
      "q": "Was bedeutet „CEO-Fraud“ (auch BEC - Business Email Compromise)?",
      "options": [
        "Der Diebstahl des Laptops des Geschäftsführers.",
        "Ein Betrug, bei dem sich Angreifer als Führungskraft ausgeben, um Mitarbeiter zu eiligen Überweisungen zu drängen.",
        "Die Fälschung von Geschäftsberichten.",
        "Ein Angriff auf die Börsenkurse."
      ],
      "answer": 1,
      "meta": "Social Engineering"
    },
    {
      "q": "Welche menschliche Eigenschaft wird beim Social Engineering oft ausgenutzt (Stichwort: CEO-Fraud)?",
      "options": [
        "Respekt vor Autorität und Zeitdruck.",
        "Das technische Verständnis.",
        "Die Langeweile.",
        "Die Pünktlichkeit."
      ],
      "answer": 0,
      "meta": "Psychologie"
    },
    {
      "q": "Was ist „Doxing“?",
      "options": [
        "Das Erstellen von Dokumentationen.",
        "Das gezielte Sammeln und Veröffentlichen privater Daten einer Person, um ihr zu schaden.",
        "Ein Update-Vorgang für Docker-Container.",
        "Das Löschen von Dokumenten."
      ],
      "answer": 1,
      "meta": "Bedrohungen"
    },

    // --- NETZWERK & INFRASTRUKTUR ---
    {
      "q": "Was ist die Hauptaufgabe einer „Firewall“?",
      "options": [
        "Sie kühlt das System bei Überhitzung.",
        "Sie überwacht und kontrolliert den ein- und ausgehenden Netzwerkverkehr basierend auf Sicherheitsregeln.",
        "Sie beschleunigt die Internetgeschwindigkeit.",
        "Sie dient ausschließlich als Virenscanner."
      ],
      "answer": 1,
      "meta": "Schutzmaßnahmen"
    },
    {
      "q": "Was macht ein „Proxy-Server“?",
      "options": [
        "Er dient als Vermittler zwischen Client und Zielserver (maskiert oft die IP des Clients).",
        "Er speichert Passwörter im Klartext.",
        "Er ist ein direkter Ersatz für ein Antivirenprogramm.",
        "Er verbindet zwei Monitore miteinander."
      ],
      "answer": 0,
      "meta": "Infrastruktur"
    },
    {
      "q": "Was bedeutet „Zero Trust“?",
      "options": [
        "Man vertraut keinem Antiviren-Hersteller.",
        "Sicherheitskonzept: „Vertraue niemandem, verifiziere alles“ – auch innerhalb des eigenen Netzwerks.",
        "Ein Netzwerk ohne Benutzer.",
        "Eine Firewall-Einstellung, die alles blockiert."
      ],
      "answer": 1,
      "meta": "Sicherheitsstrategien"
    },
    {
      "q": "Welche Phase gehört zur „Cyber Kill Chain“?",
      "options": [
        "Reconnaissance (Ausspähen / Aufklärung)",
        "Reinstallation (Neuinstallation)",
        "Refunding (Rückerstattung)",
        "Rebooting (Neustart)"
      ],
      "answer": 0,
      "meta": "Kill Chain"
    },
    {
      "q": "Was ist die korrekte Reihenfolge der Cyber Kill Chain (vereinfacht)?",
      "options": [
        "Exploitation -> Reconnaissance -> Delivery",
        "Actions on Objectives -> Installation -> Delivery",
        "Reconnaissance (Aufklärung) -> Weaponization (Bewaffnung) -> Delivery (Zustellung) -> Exploitation (Ausnutzung)",
        "Installation -> Reconnaissance -> Weaponization"
      ],
      "answer": 2,
      "meta": "Kill Chain"
    },

    // --- DATENSCHUTZ & RECHT ---
    {
      "q": "Was regelt die DSGVO (Datenschutz-Grundverordnung)?",
      "options": [
        "Die Verschlüsselung von militärischen Daten.",
        "Den Schutz personenbezogener Daten von EU-Bürgern bei der Verarbeitung.",
        "Die Preise für IT-Dienstleistungen.",
        "Die Urheberrechte von Software."
      ],
      "answer": 1,
      "meta": "Recht / DSGVO"
    },
    {
      "q": "Welche Daten gehören laut DSGVO zu den „besonderen Kategorien“ (besonders schützenswert)?",
      "options": [
        "E-Mail-Adressen und Telefonnummern.",
        "Gesundheitsdaten, politische Meinungen, religiöse Überzeugung, biometrische Daten.",
        "KFZ-Kennzeichen und Wohnadresse.",
        "Personalnummer und Büronummer."
      ],
      "answer": 1,
      "meta": "Recht / DSGVO"
    },
    {
      "q": "Was ist „VS-NfD“ (im behördlichen Kontext)?",
      "options": [
        "Verschlusssache – Nur für den Dienstgebrauch.",
        "Virenschutz – Nur für Deutschland.",
        "Verschlüsselung – Nicht für Dritte.",
        "Virtuelle Sicherheit – Nach freiem Dienst."
      ],
      "answer": 0,
      "meta": "Klassifizierung"
    },
    {
      "q": "Was ist das Ziel von „Abstrahlsicherheit“ (z.B. TEMPEST)?",
      "options": [
        "Schutz vor radioaktiver Strahlung.",
        "Verhinderung des unbefugten Abfangens von kompromittierenden elektromagnetischen Emissionen (z.B. durch Monitore oder Kabel).",
        "Schutz vor zu heller Bildschirmstrahlung für die Augen.",
        "Abschirmung gegen WLAN-Störsignale für besseren Empfang."
      ],
      "answer": 1,
      "meta": "Physische Sicherheit"
    },
    
    // --- ALLGEMEINE KONZEPTE ---
    {
      "q": "Was sind die drei Grundwerte der Informationssicherheit (CIA-Triade)?",
      "options": [
        "Computer, Internet, Algorithmen.",
        "Confidentiality (Vertraulichkeit), Integrity (Integrität), Availability (Verfügbarkeit).",
        "Control, Intelligence, Authentication.",
        "Cash, Insurance, Assets."
      ],
      "answer": 1,
      "meta": "Grundlagen"
    },
    {
      "q": "Was bedeutet „Integrität“ in der Informationssicherheit?",
      "options": [
        "Daten sind vor unbefugtem Zugriff geschützt.",
        "Daten sind vollständig und unverändert (nicht manipuliert).",
        "Das System ist jederzeit erreichbar.",
        "Die Hardware ist neuwertig."
      ],
      "answer": 1,
      "meta": "Grundlagen"
    },
    {
      "q": "Was ist ein „Exploit“?",
      "options": [
        "Ein Software-Update, das Fehler behebt.",
        "Ein Code oder Skript, das eine spezifische Schwachstelle in Software oder Hardware ausnutzt.",
        "Ein Begriff für legale Software-Nutzung.",
        "Ein besonders leistungsfähiger Server."
      ],
      "answer": 1,
      "meta": "Begriffe"
    },
    {
      "q": "Was ist Ransomware?",
      "options": [
        "Software, die den Computer schneller macht.",
        "Schadsoftware, die Daten verschlüsselt und ein Lösegeld für die Entschlüsselung fordert.",
        "Software zum zufälligen Löschen von Dateien.",
        "Ein Tool zur Fernwartung."
      ],
      "answer": 1,
      "meta": "Malware-Arten"
    },
    {
      "q": "Was versteht man unter „APT“ (Advanced Persistent Threat)?",
      "options": [
        "Einen einfachen, automatisierten Virus.",
        "Einen komplexen, zielgerichteten und dauerhaften Angriff, oft durch staatliche Akteure oder kriminelle Gruppen.",
        "Ein Programm zur automatischen Prozess-Terminierung.",
        "Allgemeine PC-Technik."
      ],
      "answer": 1,
      "meta": "Bedrohungsakteure"
    }
  ]
};

const KEY_EXAM = "infosichh_exam_clean_v1"; // New key to avoid conflict with old data
let solutionsEnabled = false;

function randShuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function loadExam() {
  try { return JSON.parse(localStorage.getItem(KEY_EXAM) || "null"); }
  catch(e) { return null; }
}

function saveExam(exam) {
  localStorage.setItem(KEY_EXAM, JSON.stringify(exam));
}

function clearExam() {
  localStorage.removeItem(KEY_EXAM);
}

function newExam() {
  const total = BANK.questions.length;
  const idxs = Array.from({length: total}, (_, i) => i);
  randShuffle(idxs);
  // Ensure we don't ask for more questions than we have
  const size = Math.min(BANK.examSize, total);
  const selected = idxs.slice(0, size);
  
  const exam = {
    selected,
    answers: {},
    submitted: false,
    submittedAt: null
  };
  saveExam(exam);
  render();
}

function updateCounters(exam) {
  const count = exam ? exam.selected.length : 0;
  document.getElementById("examCount").textContent = String(count);
  const answered = exam ? Object.keys(exam.answers || {}).length : 0;
  document.getElementById("answered").textContent = String(answered);
}

function setStatus(kind, title, body) {
  const el = document.getElementById("status");
  el.className = "notice " + kind;
  el.innerHTML = `<div><strong>${title}</strong> ${body}</div>`;
}

function render() {
  const exam = loadExam();
  const app = document.getElementById("app");
  app.innerHTML = "";

  document.getElementById("btnSubmit").disabled = !(exam && !exam.submitted);
  updateCounters(exam);

  if (!exam) {
    setStatus("warn", "Start:", "Klicke auf <strong>„Neue Prüfung“</strong>, um eine zufällige Auswahl zu ziehen.");
    return;
  }

  const examLen = exam.selected.length;

  if (!exam.submitted) {
    const answered = Object.keys(exam.answers || {}).length;
    const missing = examLen - answered;
    if (missing === 0) {
      setStatus("good", "Bereit:", "Alle Fragen beantwortet. Du kannst jetzt <strong>„Prüfung abgeben“</strong> klicken.");
    } else {
      setStatus("warn", "In Arbeit:", `Noch <strong>${missing}</strong> unbeantwortete Frage(n).`);
    }
  }

  exam.selected.forEach((qIdx, pos) => {
    const item = BANK.questions[qIdx];
    const qid = "q" + qIdx;
    const picked = exam.answers[qid];
    const locked = exam.submitted === true;

    const card = document.createElement("div");
    card.className = "card";

    const head = document.createElement("div");
    head.className = "qhead";

    const left = document.createElement("div");
    left.innerHTML = `<div class="qnum">Frage ${pos + 1} / ${examLen}</div>
                      <div class="qtext">${item.q}</div>`;

    const right = document.createElement("div");
    right.innerHTML = `<div class="qnum">${item.meta || ""}</div>`;

    head.appendChild(left);
    head.appendChild(right);
    card.appendChild(head);

    const opts = document.createElement("div");
    opts.className = "opts";

    item.options.forEach((optText, oidx) => {
      const lab = document.createElement("label");
      lab.className = "opt";

      const input = document.createElement("input");
      input.type = "radio";
      input.name = qid;
      input.value = String(oidx);
      input.disabled = locked;
      if (picked === oidx) input.checked = true;

      input.addEventListener("change", () => {
        const ex = loadExam();
        if (!ex || ex.submitted) return;
        ex.answers[qid] = oidx;
        saveExam(ex);
        updateCounters(ex);
        
        const answered = Object.keys(ex.answers || {}).length;
        const missing = ex.selected.length - answered;
        if (missing === 0) {
          setStatus("good", "Bereit:", "Alle Fragen beantwortet. Du kannst jetzt <strong>„Prüfung abgeben“</strong> klicken.");
        } else {
          setStatus("warn", "In Arbeit:", `Noch <strong>${missing}</strong> unbeantwortete Frage(n).`);
        }
      });

      const span = document.createElement("div");
      span.textContent = optText;

      lab.appendChild(input);
      lab.appendChild(span);
      opts.appendChild(lab);
    });
    card.appendChild(opts);

    if (locked && solutionsEnabled) {
      const pickedIdx = exam.answers[qid];
      const isCorrect = (pickedIdx === item.answer);
      const res = document.createElement("div");
      res.className = "notice " + (isCorrect ? "good" : "bad");
      const pickedText = (pickedIdx === undefined) ? "—" : item.options[pickedIdx];
      res.innerHTML = isCorrect
        ? `<strong>Richtig ✅</strong>`
        : `<strong>Falsch ❌</strong><div class="small" style="margin-top:6px;">Deine Antwort: ${pickedText}<br/>Richtig: ${item.options[item.answer]}</div>`;
      card.appendChild(document.createElement("hr"));
      card.appendChild(res);
    }

    app.appendChild(card);
  });
}

function submitExam() {
  const exam = loadExam();
  if (!exam || exam.submitted) return;

  const examLen = exam.selected.length;
  const answered = Object.keys(exam.answers || {}).length;
  
  if (answered < examLen) {
    if (!confirm(`Es sind noch ${examLen - answered} Frage(n) unbeantwortet. Trotzdem abgeben?`)) return;
  }

  let correct = 0;
  exam.selected.forEach(qIdx => {
    const item = BANK.questions[qIdx];
    const qid = "q" + qIdx;
    const picked = exam.answers[qid];
    if (picked === item.answer) correct++;
  });

  const percent = Math.round((correct / examLen) * 1000) / 10;
  const passed = percent >= BANK.passMark;

  exam.submitted = true;
  exam.submittedAt = new Date().toISOString();
  saveExam(exam);

  const kind = passed ? "good" : "bad";
  const verdict = passed ? "BESTANDEN" : "NICHT BESTANDEN";
  setStatus(kind, "Ergebnis:", `<strong>${correct} / ${examLen}</strong> richtig = <strong>${percent}%</strong> → <strong>${verdict}</strong> (Grenze: ${BANK.passMark}%).`);

  solutionsEnabled = document.getElementById("showSolutions").checked === true;
  document.getElementById("btnSubmit").disabled = true;
  render();
}

document.getElementById("btnNew").addEventListener("click", () => {
  if (confirm("Neue Prüfung starten? Der aktuelle Stand wird überschrieben.")) newExam();
});
document.getElementById("btnSubmit").addEventListener("click", submitExam);
document.getElementById("btnReset").addEventListener("click", () => {
  if (!confirm("Wirklich alles löschen?")) return;
  clearExam();
  setStatus("warn", "Start:", "Klicke auf <strong>„Neue Prüfung“</strong>, um eine zufällige Auswahl zu ziehen.");
  render();
});
document.getElementById("showSolutions").addEventListener("change", () => {
  solutionsEnabled = document.getElementById("showSolutions").checked === true;
  const exam = loadExam();
  if (exam && exam.submitted) render();
});

render();
</script>
</body>
</html>